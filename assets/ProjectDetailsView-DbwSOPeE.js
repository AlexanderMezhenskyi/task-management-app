import{_ as x,c as u,o,e as t,d as P,r as m,k as Z,j as f,p as j,I as R,F,y as U,t as y,h as I,B as b,w as T,i as M,q as tt,l as q,m as W,C as vt,v as L,J as et,g as C,f as N,n as X,u as pt,b as ft,H as mt,z as kt,D as A,E as _t,G as H}from"./index-3qcvwLtC.js";import{f as st,E as yt,R as gt,a as ht}from"./helpers-CR7rCIbh.js";const wt={},bt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Tt(k,n){return o(),u("svg",bt,n[0]||(n[0]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("path",{d:"M16 12H8"},null,-1),t("path",{d:"m12 8-4 4 4 4"},null,-1)]))}const $t=x(wt,[["render",Tt]]),G=["High","Medium","Low"],J=["Pending","In Progress","Completed"],xt={class:"task-filters"},jt={class:"form-group"},Ct=["value"],It={class:"form-group"},Mt=["value"],Pt=P({__name:"TaskFilters",emits:["update-filters"],setup(k,{emit:n}){const p=n,l=m(""),e=m("");Z([l,e],()=>{p("update-filters",{priority:l.value,status:e.value})});const c=()=>{l.value="",e.value=""};return(h,a)=>(o(),u("div",xt,[t("div",jt,[a[3]||(a[3]=t("label",{class:"form-label",for:"priority"},"Priority:",-1)),j(t("select",{id:"priority","onUpdate:modelValue":a[0]||(a[0]=i=>l.value=i),class:"form-select"},[a[2]||(a[2]=t("option",{value:""},"All priorities",-1)),(o(!0),u(F,null,U(I(G),i=>(o(),u("option",{key:i,value:i},y(i),9,Ct))),128))],512),[[R,l.value]])]),t("div",It,[a[5]||(a[5]=t("label",{class:"form-label",for:"status"},"Status:",-1)),j(t("select",{id:"status","onUpdate:modelValue":a[1]||(a[1]=i=>e.value=i),class:"form-select"},[a[4]||(a[4]=t("option",{value:""},"All statuses",-1)),(o(!0),u(F,null,U(I(J),i=>(o(),u("option",{key:i,value:i},y(i),9,Mt))),128))],512),[[R,e.value]])]),f(b,{variant:"ghost",size:"sm","no-padding":"",onClick:c},{default:T(()=>a[6]||(a[6]=[M(" Reset filters ")])),_:1,__:[6]})]))}}),St=x(Pt,[["__scopeId","data-v-5db53a73"]]),Dt={class:"task-modal-content"},Et={class:"task-modal-header flex justify-between align-center"},Vt={class:"form-group"},Bt={class:"form-group"},At={class:"form-group"},Ft=["value"],Ut={class:"form-group"},zt=["value"],Nt={class:"form-group"},Rt={class:"flex justify-end align-center"},Ot=P({__name:"TaskModal",props:{taskToEdit:{default:null}},emits:["create","close","update"],setup(k,{emit:n}){const p=n,l=tt(),e=m(""),c=m(""),h=m("Pending"),a=m("Medium"),i=m(""),$=m(null);$.value=Number(l.params.id)||null,Z(()=>k.taskToEdit,v=>{v?(e.value=v.title,c.value=v.description,h.value=v.status,a.value=v.priority,i.value=v.dueDate):(e.value="",c.value="",h.value="Pending",a.value="Medium",i.value="")},{immediate:!0});const g=q(()=>e.value.trim().length>0&&c.value.trim().length>0&&i.value.trim().length>0&&G.includes(a.value)&&J.includes(h.value)),S=()=>{if(!g.value||$.value===null)return;const v={title:e.value.trim(),description:c.value.trim(),status:h.value,priority:a.value,dueDate:i.value,projectId:$.value};k.taskToEdit&&k.taskToEdit.id?p("update",{...v,id:k.taskToEdit.id}):p("create",v)},D=()=>{p("close")};return(v,s)=>(o(),u("div",{class:"task-modal flex justify-center align-center",onClick:W(D,["self"])},[t("div",Dt,[t("div",Et,[t("h2",null,y(v.taskToEdit?"Edit task":"Create task"),1),f(b,{class:"cursor","no-padding":"",size:"sm",variant:"ghost","text-color":"var(--color-text)",onClickButton:D},{default:T(()=>[f(vt)]),_:1})]),t("form",{class:"form",onSubmit:W(S,["prevent"])},[t("div",Vt,[s[5]||(s[5]=t("label",{class:"form-label",for:"title"},"Title",-1)),j(t("input",{id:"title","onUpdate:modelValue":s[0]||(s[0]=d=>e.value=d),class:"form-input",required:""},null,512),[[L,e.value]])]),t("div",Bt,[s[6]||(s[6]=t("label",{class:"form-label",for:"desc"},"Description",-1)),j(t("textarea",{id:"desc","onUpdate:modelValue":s[1]||(s[1]=d=>c.value=d),class:"form-textarea",rows:"4",required:""},null,512),[[L,c.value]])]),t("div",At,[s[8]||(s[8]=t("label",{class:"form-label",for:"priority"},"Priority",-1)),j(t("select",{id:"priority","onUpdate:modelValue":s[2]||(s[2]=d=>a.value=d),class:"form-select"},[s[7]||(s[7]=t("option",{disabled:"",value:""},"Select priority",-1)),(o(!0),u(F,null,U(I(G),d=>(o(),u("option",{key:d,value:d},y(d),9,Ft))),128))],512),[[R,a.value]])]),t("div",Ut,[s[10]||(s[10]=t("label",{class:"form-label",for:"status"},"Status",-1)),j(t("select",{id:"status","onUpdate:modelValue":s[3]||(s[3]=d=>h.value=d),class:"form-select"},[s[9]||(s[9]=t("option",{disabled:"",value:""},"Select status",-1)),(o(!0),u(F,null,U(I(J),d=>(o(),u("option",{key:d,value:d},y(d),9,zt))),128))],512),[[R,h.value]])]),t("div",Nt,[s[11]||(s[11]=t("label",{class:"form-label",for:"due-date"},"Due date",-1)),j(t("input",{id:"due-date","onUpdate:modelValue":s[4]||(s[4]=d=>i.value=d),class:"form-input",type:"date"},null,512),[[L,i.value]])]),t("div",Rt,[f(b,{type:"submit",disabled:!g.value},{default:T(()=>[M(y(v.taskToEdit?"Update":"Create"),1)]),_:1},8,["disabled"])])],32)])]))}}),Lt=x(Ot,[["__scopeId","data-v-e2ce1e0d"]]),Ht={},qt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Gt(k,n){return o(),u("svg",qt,n[0]||(n[0]=[et('<path d="m3 8 4-4 4 4"></path><path d="M7 4v16"></path><path d="M15 4h5l-5 6h5"></path><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"></path><path d="M20 18h-5"></path>',5)]))}const Jt=x(Ht,[["render",Gt]]),Kt={},Qt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Wt(k,n){return o(),u("svg",Qt,n[0]||(n[0]=[et('<path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path>',5)]))}const Xt=x(Kt,[["render",Wt]]),Y=P({__name:"SortArrow",props:{direction:{}},setup(k){return(n,p)=>n.direction==="asc"?(o(),C(Xt,{key:0})):(o(),C(Jt,{key:1}))}}),Yt={class:"task-card flex column"},Zt={class:"task-row align-center"},te={class:"mobile-view-wrap flex justify-between align-center"},ee={class:"mobile-view-wrap flex justify-between align-center"},se={class:"task-actions flex justify-end"},oe={key:0,class:"task-description"},ae=P({__name:"TaskItem",props:{task:{}},emits:["edit-task","remove-task"],setup(k,{emit:n}){const p=n;return(l,e)=>(o(),u("div",Yt,[t("div",Zt,[t("div",null,y(l.task.title),1),t("div",te,[t("div",null,y(l.task.priority),1),t("div",null,y(l.task.status),1)]),t("div",ee,[t("div",null,y(I(st)(l.task.dueDate)),1),t("div",se,[f(b,{size:"sm",variant:"ghost","no-padding":"","text-color":"var(--color-text)",onClickButton:e[0]||(e[0]=c=>p("edit-task"))},{default:T(()=>[f(yt)]),_:1}),f(b,{size:"sm",variant:"ghost","no-padding":"","text-color":"var(--color-text)",onClickButton:e[1]||(e[1]=c=>p("remove-task"))},{default:T(()=>[f(gt)]),_:1})])])]),l.task.description?(o(),u("div",oe,[e[2]||(e[2]=t("span",{class:"task-description-title"},"Description:",-1)),M(" "+y(l.task.description),1)])):N("",!0)]))}}),le=x(ae,[["__scopeId","data-v-473eccb0"]]),re={class:"task-table flex column"},ne={class:"task-header align-center"},ie={class:"task-sortable-column flex align-center"},de={class:"task-sortable-column-title flex align-center"},ue={class:"task-sortable-column flex align-center"},ce={class:"task-sortable-column-title flex align-center"},ve=P({__name:"TaskTable",props:{tasks:{},sort:{}},emits:["edit-task","remove-task","toggle-sort"],setup(k,{emit:n}){const p=n;return(l,e)=>(o(),u("div",re,[t("div",ne,[e[4]||(e[4]=t("div",null,"Title",-1)),t("div",ie,[f(b,{"no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:e[0]||(e[0]=c=>p("toggle-sort","priority"))},{default:T(()=>[t("span",de,[e[2]||(e[2]=M(" Priority ")),t("span",{class:X(["task-sort-icon cursor",{active:l.sort.field==="priority"}])},[f(Y,{direction:l.sort.direction},null,8,["direction"])],2)])]),_:1})]),t("div",ue,[f(b,{"no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:e[1]||(e[1]=c=>p("toggle-sort","status"))},{default:T(()=>[t("span",ce,[e[3]||(e[3]=M(" Status ")),t("span",{class:X(["task-sort-icon cursor",{active:l.sort.field==="status"}])},[f(Y,{direction:l.sort.direction},null,8,["direction"])],2)])]),_:1})]),e[5]||(e[5]=t("div",null,"Due date",-1)),e[6]||(e[6]=t("div",null,"Actions",-1))]),(o(!0),u(F,null,U(l.tasks,c=>(o(),C(le,{key:c.id,task:c,onEditTask:h=>p("edit-task",c),onRemoveTask:h=>p("remove-task",c.id)},null,8,["task","onEditTask","onRemoveTask"]))),128))]))}}),pe=x(ve,[["__scopeId","data-v-2df11c06"]]),fe={class:"container"},me={class:"project-header flex justify-between align-start"},ke={class:"project-title-wrap flex align-start"},_e={key:0,class:"project-title"},ye={class:"project-dueDate"},ge={class:"task-filters"},he=P({__name:"ProjectDetails",setup(k){const n=tt(),p=pt(),{fetchProjectByIdAsync:l}=ft(),{fetchTasksByProjectIdAsync:e,createTaskAsync:c,updateTaskAsync:h,removeTaskAsync:a}=mt(),i=m([]),$=m(null),g=m(!1),S=m(!1),D=m(null),v=m({priority:"",status:""}),s=["High","Medium","Low"],d=["Completed","In Progress","Pending"],w=m({field:"",direction:"asc"});kt(async()=>await dt());const ot=q(()=>i.value.filter(r=>{const _=!v.value.priority||r.priority===v.value.priority,E=!v.value.status||r.status===v.value.status;return _&&E})),K=q(()=>{const r=[...ot.value];return w.value.field==="priority"?r.sort((_,E)=>{const V=s.indexOf(_.priority),B=s.indexOf(E.priority);return w.value.direction==="asc"?V-B:B-V}):w.value.field==="status"&&r.sort((_,E)=>{const V=d.indexOf(_.status),B=d.indexOf(E.status);return w.value.direction==="asc"?V-B:B-V}),r}),Q=Number(n.params.id),at=()=>{D.value=null,S.value=!0},lt=r=>{D.value=r,S.value=!0},O=()=>{S.value=!1},rt=async r=>{g.value=!0;try{await c(r),await z(),H("Task created successfully.")}catch{A("Failed to create task.")}finally{g.value=!1,O()}},nt=async r=>{g.value=!0;try{await h(r),await z(),H("Task updated successfully.")}catch{A("Failed to update task.")}finally{g.value=!1,O()}},it=async r=>{g.value=!0;try{await a(r),await z(),H("Task deleted successfully.")}catch{A("Failed to remove task.")}finally{g.value=!1}},z=async()=>{g.value=!0;try{i.value=await e(Q)}catch{A("Failed to fetch tasks.")}finally{g.value=!1}},dt=async()=>{try{$.value=await l(Q),await z()}catch{A("Failed to fetch project.")}},ut=r=>{v.value=r},ct=r=>{w.value.field===r?w.value.direction=w.value.direction==="asc"?"desc":"asc":(w.value.field=r,w.value.direction="asc")};return(r,_)=>(o(),u("section",fe,[g.value?(o(),C(_t,{key:0})):N("",!0),t("div",me,[t("div",ke,[f(b,{class:"back-button","no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:_[0]||(_[0]=E=>I(p).back())},{default:T(()=>[f($t)]),_:1}),$.value?(o(),u("h1",_e,[M(" Project: "+y($.value.title)+" ",1),t("span",ye,"(Due: "+y(I(st)($.value.dueDate))+")",1)])):N("",!0)]),f(b,{class:"create-task-button",onClickButton:at},{default:T(()=>_[1]||(_[1]=[M("Create task")])),_:1,__:[1]})]),t("div",ge,[f(St,{onUpdateFilters:ut})]),K.value.length>0?(o(),C(pe,{key:1,sort:w.value,tasks:K.value,onEditTask:lt,onRemoveTask:it,onToggleSort:ct},null,8,["sort","tasks"])):(o(),C(ht,{key:2,title:"No tasks yet",message:"Start by creating your first task for this project."})),S.value?(o(),C(Lt,{key:3,"task-to-edit":D.value,onClose:O,onCreate:rt,onUpdate:nt},null,8,["task-to-edit"])):N("",!0)]))}}),we=x(he,[["__scopeId","data-v-50ab7a43"]]),be={class:"container"},xe=P({__name:"ProjectDetailsView",setup(k){return(n,p)=>(o(),u("section",be,[f(we)]))}});export{xe as default};

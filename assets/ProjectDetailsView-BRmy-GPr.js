import{_ as T,c as r,o,a as t,d as C,r as k,f,j as h,v as P,F as M,h as I,i as $,B as x,w as b,t as p,g as E,k as z,l as W,m as G,n as R,p as F,C as J,q as K,e as A,s as Q,x as X,b as B,u as Y}from"./index-C6LB8qoN.js";import{f as L,E as Z}from"./helpers-CTjuGj1K.js";const tt={},et={class:"loader-container flex justify-center align-center"};function st(m,a){return o(),r("div",et,a[0]||(a[0]=[t("div",{class:"spinner"},null,-1)]))}const ot=T(tt,[["render",st],["__scopeId","data-v-2f282814"]]),at={},lt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function nt(m,a){return o(),r("svg",lt,a[0]||(a[0]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("path",{d:"M16 12H8"},null,-1),t("path",{d:"m12 8-4 4 4 4"},null,-1)]))}const rt=T(at,[["render",nt]]),U=["High","Medium","Low"],N=["Pending","In Progress","Completed"],it={class:"task-filters flex align-center"},dt={class:"form-group"},ut=["value"],ct={class:"form-group"},vt=["value"],pt=C({__name:"TaskFilters",setup(m){const a=k(""),d=k(""),c=()=>{a.value="",d.value=""};return(i,e)=>(o(),r("div",it,[t("div",dt,[e[3]||(e[3]=t("label",{class:"form-label",for:"priority"},"Priority:",-1)),h(t("select",{id:"priority","onUpdate:modelValue":e[0]||(e[0]=l=>a.value=l),class:"form-select"},[e[2]||(e[2]=t("option",{value:""},"All priorities",-1)),(o(!0),r(M,null,I($(U),l=>(o(),r("option",{key:l,value:l},p(l),9,ut))),128))],512),[[P,a.value]])]),t("div",ct,[e[5]||(e[5]=t("label",{class:"form-label",for:"status"},"Status:",-1)),h(t("select",{id:"status","onUpdate:modelValue":e[1]||(e[1]=l=>d.value=l),class:"form-select"},[e[4]||(e[4]=t("option",{value:""},"All statuses",-1)),(o(!0),r(M,null,I($(N),l=>(o(),r("option",{key:l,value:l},p(l),9,vt))),128))],512),[[P,d.value]])]),f(x,{variant:"ghost",size:"sm","no-padding":"",onClick:c},{default:b(()=>e[6]||(e[6]=[E(" Reset Filters ")])),_:1,__:[6]})]))}}),ft=T(pt,[["__scopeId","data-v-d5f994f2"]]),mt={class:"task-modal-content"},kt={class:"task-modal-header flex justify-between align-center"},_t={class:"form-group"},yt={class:"form-group"},gt={class:"form-group"},Tt=["value"],wt={class:"form-group"},ht=["value"],$t={class:"form-group"},xt={class:"flex justify-end align-center"},bt=C({__name:"TaskModal",props:{taskToEdit:{default:null}},emits:["create","close","update"],setup(m,{emit:a}){const d=a,c=z(),i=k(""),e=k(""),l=k("Pending"),_=k("Medium"),u=k(""),w=k(null);w.value=Number(c.params.id)||null,W(()=>m.taskToEdit,v=>{v?(i.value=v.title,e.value=v.description,l.value=v.status,_.value=v.priority,u.value=v.dueDate):(i.value="",e.value="",l.value="Pending",_.value="Medium",u.value="")},{immediate:!0});const j=G(()=>i.value.trim().length>0&&e.value.trim().length>0&&u.value.trim().length>0&&U.includes(_.value)&&N.includes(l.value)),S=()=>{if(!j.value||w.value===null)return;const v={title:i.value.trim(),description:e.value.trim(),status:l.value,priority:_.value,dueDate:u.value,projectId:w.value};m.taskToEdit&&m.taskToEdit.id?d("update",{...v,id:m.taskToEdit.id}):d("create",v)},D=()=>{d("close")};return(v,s)=>(o(),r("div",{class:"task-modal flex justify-center align-center",onClick:R(D,["self"])},[t("div",mt,[t("div",kt,[t("h2",null,p(v.taskToEdit?"Edit task":"Create task"),1),f(x,{class:"cursor","no-padding":"",size:"sm",variant:"ghost","text-color":"var(--color-text)",onClickButton:D},{default:b(()=>[f(J)]),_:1})]),t("form",{class:"form",onSubmit:R(S,["prevent"])},[t("div",_t,[s[5]||(s[5]=t("label",{class:"form-label",for:"title"},"Title",-1)),h(t("input",{id:"title","onUpdate:modelValue":s[0]||(s[0]=n=>i.value=n),class:"form-input",required:""},null,512),[[F,i.value]])]),t("div",yt,[s[6]||(s[6]=t("label",{class:"form-label",for:"desc"},"Description",-1)),h(t("textarea",{id:"desc","onUpdate:modelValue":s[1]||(s[1]=n=>e.value=n),class:"form-textarea",rows:"4",required:""},null,512),[[F,e.value]])]),t("div",gt,[s[8]||(s[8]=t("label",{class:"form-label",for:"priority"},"Priority",-1)),h(t("select",{id:"priority","onUpdate:modelValue":s[2]||(s[2]=n=>_.value=n),class:"form-select"},[s[7]||(s[7]=t("option",{disabled:"",value:""},"Select priority",-1)),(o(!0),r(M,null,I($(U),n=>(o(),r("option",{key:n,value:n},p(n),9,Tt))),128))],512),[[P,_.value]])]),t("div",wt,[s[10]||(s[10]=t("label",{class:"form-label",for:"status"},"Status",-1)),h(t("select",{id:"status","onUpdate:modelValue":s[3]||(s[3]=n=>l.value=n),class:"form-select"},[s[9]||(s[9]=t("option",{disabled:"",value:""},"Select status",-1)),(o(!0),r(M,null,I($(N),n=>(o(),r("option",{key:n,value:n},p(n),9,ht))),128))],512),[[P,l.value]])]),t("div",$t,[s[11]||(s[11]=t("label",{class:"form-label",for:"due-date"},"Due date",-1)),h(t("input",{id:"due-date","onUpdate:modelValue":s[4]||(s[4]=n=>u.value=n),class:"form-input",type:"date"},null,512),[[F,u.value]])]),t("div",xt,[f(x,{type:"submit",disabled:!j.value},{default:b(()=>[E(p(v.taskToEdit?"Update":"Create"),1)]),_:1},8,["disabled"])])],32)])]))}}),jt=T(bt,[["__scopeId","data-v-e2ce1e0d"]]),Ct={},Dt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Mt(m,a){return o(),r("svg",Dt,a[0]||(a[0]=[t("path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"},null,-1),t("path",{d:"m15 5 4 4"},null,-1)]))}const It=T(Ct,[["render",Mt]]),Et={},Vt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Bt(m,a){return o(),r("svg",Vt,a[0]||(a[0]=[K('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5)]))}const Pt=T(Et,[["render",Bt]]),St={class:"task-card flex column"},Ft={class:"task-row align-center"},At={class:"task-actions flex justify-end"},Ut={key:0,class:"task-description"},Nt=C({__name:"TaskItem",props:{task:{}},emits:["edit-task","remove-task"],setup(m,{emit:a}){const d=a;return(c,i)=>(o(),r("div",St,[t("div",Ft,[t("div",null,p(c.task.id)+" - "+p(c.task.title),1),t("div",null,p(c.task.priority),1),t("div",null,p(c.task.status),1),t("div",null,p($(L)(c.task.dueDate)),1),t("div",At,[f(x,{size:"sm",variant:"ghost","no-padding":"","text-color":"var(--color-text)",onClickButton:i[0]||(i[0]=e=>d("edit-task"))},{default:b(()=>[f(It)]),_:1}),f(x,{size:"sm",variant:"ghost","no-padding":"","text-color":"var(--color-text)",onClickButton:i[1]||(i[1]=e=>d("remove-task"))},{default:b(()=>[f(Pt)]),_:1})])]),c.task.description?(o(),r("div",Ut,[i[2]||(i[2]=t("span",{class:"task-description-title"},"Description:",-1)),E(" "+p(c.task.description),1)])):A("",!0)]))}}),Rt=T(Nt,[["__scopeId","data-v-3927b322"]]),zt={class:"task-table flex column"},Lt=C({__name:"TaskTable",props:{tasks:{}},emits:["edit-task","remove-task"],setup(m,{emit:a}){const d=a;return(c,i)=>(o(),r("div",zt,[i[0]||(i[0]=t("div",{class:"task-header align-center"},[t("div",null,"Title"),t("div",null,"Priority"),t("div",null,"Status"),t("div",null,"Due Date"),t("div",null,"Actions")],-1)),(o(!0),r(M,null,I(c.tasks,e=>(o(),r("div",{key:e.id},[f(Rt,{task:e,onEditTask:l=>d("edit-task",e),onRemoveTask:l=>d("remove-task",e.id)},null,8,["task","onEditTask","onRemoveTask"])]))),128))]))}}),qt=T(Lt,[["__scopeId","data-v-25eda5ac"]]),Ht={class:"container"},Ot={class:"project-header flex justify-between align-center"},Wt={class:"flex align-center"},Gt={class:"project-title"},Jt={class:"project-dueDate"},Kt={class:"task-filters"},Qt=C({__name:"ProjectDetails",setup(m){const a=z(),d=Y(),{fetchTasksByProjectIdAsync:c,createTaskAsync:i,updateTaskAsync:e,removeTaskAsync:l}=Q(),_=k([]),u=k(!1),w=k(!1),j=k(null);X(()=>{V()});const S=Number(a.params.id),D={name:"Website Redesign",dueDate:"2025-06-10"},v=()=>{j.value=null,w.value=!0},s=y=>{j.value=y,w.value=!0},n=()=>{w.value=!1},q=async y=>{u.value=!0;try{await i(y)}catch(g){console.error("Failed to create task",g)}finally{u.value=!1}await V(),n()},H=async y=>{u.value=!0;try{await e(y)}catch(g){console.error("Failed to update task",g)}finally{u.value=!1}await V(),n()},O=async y=>{u.value=!0;try{await l(y)}catch(g){console.error("Failed to remove task",g)}finally{u.value=!1}await V()},V=async()=>{u.value=!0;try{_.value=await c(S)}catch(y){console.error("Failed to fetch tasks",y)}finally{u.value=!1}};return(y,g)=>(o(),r("section",Ht,[u.value?(o(),B(ot,{key:0})):A("",!0),t("div",Ot,[t("div",Wt,[f(x,{"no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:g[0]||(g[0]=Zt=>$(d).back())},{default:b(()=>[f(rt)]),_:1}),t("h1",Gt,[E(" Project: "+p(D.name)+" ",1),t("span",Jt,"(Due: "+p($(L)(D.dueDate))+")",1)])]),f(x,{onClickButton:v},{default:b(()=>g[1]||(g[1]=[E("Create task")])),_:1,__:[1]})]),t("div",Kt,[f(ft)]),_.value.length>0?(o(),B(qt,{key:1,tasks:_.value,onEditTask:s,onRemoveTask:O},null,8,["tasks"])):(o(),B(Z,{key:2,title:"No tasks yet",message:"Start by creating your first task for this project."})),w.value?(o(),B(jt,{key:3,"task-to-edit":j.value,onClose:n,onCreate:q,onUpdate:H},null,8,["task-to-edit"])):A("",!0)]))}}),Xt=T(Qt,[["__scopeId","data-v-edabefdb"]]),Yt={class:"container"},se=C({__name:"ProjectDetailsView",setup(m){return(a,d)=>(o(),r("section",Yt,[f(Xt)]))}});export{se as default};

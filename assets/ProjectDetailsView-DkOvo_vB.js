import{_ as C,c as d,o as s,e as t,d as j,r as _,k as tt,j as v,p as I,I as O,F as U,y as z,t as h,h as S,B as $,w as x,i as T,q as et,l as E,m as X,C as mt,v as q,J as st,g as D,n as N,f as L,u as kt,b as yt,H as _t,z as gt,D as F,E as ht,G}from"./index-DnY5Mj3-.js";import{u as at,f as ot,E as wt,R as bt,a as Tt}from"./helpers-CoucvtTK.js";const $t={},xt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Ct(y,n){return s(),d("svg",xt,n[0]||(n[0]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("path",{d:"M16 12H8"},null,-1),t("path",{d:"m12 8-4 4 4 4"},null,-1)]))}const jt=C($t,[["render",Ct]]),J=["High","Medium","Low"],K=["Pending","In Progress","Completed"],It={class:"task-filters"},Dt={class:"form-group"},St=["value"],Mt={class:"form-group"},Pt=["value"],Bt=j({__name:"TaskFilters",emits:["update-filters"],setup(y,{emit:n}){const p=n,u=_(""),e=_("");tt([u,e],()=>{p("update-filters",{priority:u.value,status:e.value})});const r=()=>{u.value="",e.value=""};return(f,o)=>(s(),d("div",It,[t("div",Dt,[o[3]||(o[3]=t("label",{class:"form-label",for:"priority"},"Priority:",-1)),I(t("select",{id:"priority","onUpdate:modelValue":o[0]||(o[0]=i=>u.value=i),class:"form-select"},[o[2]||(o[2]=t("option",{value:""},"All priorities",-1)),(s(!0),d(U,null,z(S(J),i=>(s(),d("option",{key:i,value:i},h(i),9,St))),128))],512),[[O,u.value]])]),t("div",Mt,[o[5]||(o[5]=t("label",{class:"form-label",for:"status"},"Status:",-1)),I(t("select",{id:"status","onUpdate:modelValue":o[1]||(o[1]=i=>e.value=i),class:"form-select"},[o[4]||(o[4]=t("option",{value:""},"All statuses",-1)),(s(!0),d(U,null,z(S(K),i=>(s(),d("option",{key:i,value:i},h(i),9,Pt))),128))],512),[[O,e.value]])]),v($,{variant:"ghost",size:"sm","no-padding":"",onClick:r},{default:x(()=>o[6]||(o[6]=[T(" Reset filters ")])),_:1,__:[6]})]))}}),Et=C(Bt,[["__scopeId","data-v-5db53a73"]]),Vt={class:"task-modal-content"},At={class:"task-modal-header flex justify-between align-center"},Ft={class:"form-group"},Ut={class:"form-group"},zt={class:"form-group"},Nt=["value"],Rt={class:"form-group"},Lt=["value"],Ot={class:"form-group"},Ht={class:"flex justify-end align-center"},qt=j({__name:"TaskModal",props:{taskToEdit:{default:null}},emits:["create","close","update"],setup(y,{emit:n}){const p=n,u=et(),e=_(""),r=_(""),f=_("Pending"),o=_("Medium"),i=_(""),b=_(null);b.value=Number(u.params.id)||null,tt(()=>y.taskToEdit,m=>{m?(e.value=m.title,r.value=m.description,f.value=m.status,o.value=m.priority,i.value=m.dueDate):(e.value="",r.value="",f.value="Pending",o.value="Medium",i.value="")},{immediate:!0});const g=E(()=>e.value.trim().length>0&&r.value.trim().length>0&&i.value.trim().length>0&&J.includes(o.value)&&K.includes(f.value)),M=()=>{if(!g.value||b.value===null)return;const m={title:e.value.trim(),description:r.value.trim(),status:f.value,priority:o.value,dueDate:i.value,projectId:b.value};y.taskToEdit&&y.taskToEdit.id?p("update",{...m,id:y.taskToEdit.id}):p("create",m)},P=()=>{p("close")};return(m,a)=>(s(),d("div",{class:"task-modal flex justify-center align-center",onClick:X(P,["self"])},[t("div",Vt,[t("div",At,[t("h2",null,h(m.taskToEdit?"Edit task":"Create task"),1),v($,{class:"cursor","no-padding":"",size:"sm",variant:"ghost","text-color":"var(--color-text)",onClickButton:P},{default:x(()=>[v(mt)]),_:1})]),t("form",{class:"form",onSubmit:X(M,["prevent"])},[t("div",Ft,[a[5]||(a[5]=t("label",{class:"form-label",for:"title"},"Title",-1)),I(t("input",{id:"title","onUpdate:modelValue":a[0]||(a[0]=c=>e.value=c),class:"form-input",required:""},null,512),[[q,e.value]])]),t("div",Ut,[a[6]||(a[6]=t("label",{class:"form-label",for:"desc"},"Description",-1)),I(t("textarea",{id:"desc","onUpdate:modelValue":a[1]||(a[1]=c=>r.value=c),class:"form-textarea",rows:"4",required:""},null,512),[[q,r.value]])]),t("div",zt,[a[8]||(a[8]=t("label",{class:"form-label",for:"priority"},"Priority",-1)),I(t("select",{id:"priority","onUpdate:modelValue":a[2]||(a[2]=c=>o.value=c),class:"form-select"},[a[7]||(a[7]=t("option",{disabled:"",value:""},"Select priority",-1)),(s(!0),d(U,null,z(S(J),c=>(s(),d("option",{key:c,value:c},h(c),9,Nt))),128))],512),[[O,o.value]])]),t("div",Rt,[a[10]||(a[10]=t("label",{class:"form-label",for:"status"},"Status",-1)),I(t("select",{id:"status","onUpdate:modelValue":a[3]||(a[3]=c=>f.value=c),class:"form-select"},[a[9]||(a[9]=t("option",{disabled:"",value:""},"Select status",-1)),(s(!0),d(U,null,z(S(K),c=>(s(),d("option",{key:c,value:c},h(c),9,Lt))),128))],512),[[O,f.value]])]),t("div",Ot,[a[11]||(a[11]=t("label",{class:"form-label",for:"due-date"},"Due date",-1)),I(t("input",{id:"due-date","onUpdate:modelValue":a[4]||(a[4]=c=>i.value=c),class:"form-input",type:"date"},null,512),[[q,i.value]])]),t("div",Ht,[v($,{type:"submit",disabled:!g.value},{default:x(()=>[T(h(m.taskToEdit?"Update":"Create"),1)]),_:1},8,["disabled"])])],32)])]))}}),Gt=C(qt,[["__scopeId","data-v-e2ce1e0d"]]),Jt={},Kt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Qt(y,n){return s(),d("svg",Kt,n[0]||(n[0]=[st('<path d="m3 8 4-4 4 4"></path><path d="M7 4v16"></path><path d="M15 4h5l-5 6h5"></path><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"></path><path d="M20 18h-5"></path>',5)]))}const Wt=C(Jt,[["render",Qt]]),Xt={},Yt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Zt(y,n){return s(),d("svg",Yt,n[0]||(n[0]=[st('<path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path>',5)]))}const te=C(Xt,[["render",Zt]]),Y=j({__name:"SortArrow",props:{direction:{}},setup(y){return(n,p)=>n.direction==="asc"?(s(),D(te,{key:0})):(s(),D(Wt,{key:1}))}}),ee=j({__name:"StatusBadge",props:{label:{},type:{}},setup(y){const n=y,p=E(()=>n.label.toLowerCase().replace(/\s+/g,"-"));return(u,e)=>(s(),d("span",{class:N(["badge",u.type,p.value])},h(u.label),3))}}),Z=C(ee,[["__scopeId","data-v-dedeba83"]]),se={class:"task-card flex column"},ae={class:"task-row align-center"},oe={class:"mobile-view-wrap flex justify-between align-center"},le={class:"mobile-view-wrap flex justify-between align-center"},re={class:"task-actions flex justify-end"},ne={key:0,class:"task-description"},ie=j({__name:"TaskItem",props:{task:{}},emits:["edit-task","remove-task"],setup(y,{emit:n}){const p=y,u=n,e=E(()=>at(p.task.dueDate));return(r,f)=>(s(),d("div",se,[t("div",ae,[t("div",null,h(r.task.title),1),t("div",oe,[t("div",null,[v(Z,{label:r.task.priority,type:"priority"},null,8,["label"])]),t("div",null,[v(Z,{label:r.task.status,type:"status"},null,8,["label"])])]),t("div",le,[t("div",{class:N(e.value)},h(S(ot)(r.task.dueDate)),3),t("div",re,[v($,{size:"sm",variant:"ghost","no-padding":"","text-color":"var(--color-text)",onClickButton:f[0]||(f[0]=o=>u("edit-task"))},{default:x(()=>[v(wt)]),_:1}),v($,{size:"sm",variant:"ghost","no-padding":"","text-color":"var(--color-text)",onClickButton:f[1]||(f[1]=o=>u("remove-task"))},{default:x(()=>[v(bt)]),_:1})])])]),r.task.description?(s(),d("div",ne,[f[2]||(f[2]=t("span",{class:"task-description-title"},"Description:",-1)),T(" "+h(r.task.description),1)])):L("",!0)]))}}),ue=C(ie,[["__scopeId","data-v-9f1df523"]]),de={class:"task-table flex column"},ce={class:"task-header align-center"},ve={class:"task-sortable-column flex align-center"},pe={class:"task-sortable-column-title flex align-center"},fe={class:"task-sortable-column flex align-center"},me={class:"task-sortable-column-title flex align-center"},ke=j({__name:"TaskTable",props:{tasks:{},sort:{}},emits:["edit-task","remove-task","toggle-sort"],setup(y,{emit:n}){const p=n;return(u,e)=>(s(),d("div",de,[t("div",ce,[e[4]||(e[4]=t("div",null,"Title",-1)),t("div",ve,[v($,{"no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:e[0]||(e[0]=r=>p("toggle-sort","priority"))},{default:x(()=>[t("span",pe,[e[2]||(e[2]=T(" Priority ")),t("span",{class:N(["task-sort-icon cursor",{active:u.sort.field==="priority"}])},[v(Y,{direction:u.sort.direction},null,8,["direction"])],2)])]),_:1})]),t("div",fe,[v($,{"no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:e[1]||(e[1]=r=>p("toggle-sort","status"))},{default:x(()=>[t("span",me,[e[3]||(e[3]=T(" Status ")),t("span",{class:N(["task-sort-icon cursor",{active:u.sort.field==="status"}])},[v(Y,{direction:u.sort.direction},null,8,["direction"])],2)])]),_:1})]),e[5]||(e[5]=t("div",null,"Due date",-1)),e[6]||(e[6]=t("div",null,"Actions",-1))]),(s(!0),d(U,null,z(u.tasks,r=>(s(),D(ue,{key:r.id,task:r,onEditTask:f=>p("edit-task",r),onRemoveTask:f=>p("remove-task",r.id)},null,8,["task","onEditTask","onRemoveTask"]))),128))]))}}),ye=C(ke,[["__scopeId","data-v-2df11c06"]]),_e={class:"container"},ge={class:"project-header flex justify-between align-start"},he={class:"project-title-wrap flex align-start"},we={key:0,class:"project-title"},be={class:"project-dueDate"},Te={class:"task-filters"},$e=j({__name:"ProjectDetails",setup(y){const n=et(),p=kt(),{fetchProjectByIdAsync:u}=yt(),{fetchTasksByProjectIdAsync:e,createTaskAsync:r,updateTaskAsync:f,removeTaskAsync:o}=_t(),i=_([]),b=_(null),g=_(!1),M=_(!1),P=_(null),m=_({priority:"",status:""}),a=["High","Medium","Low"],c=["Completed","In Progress","Pending"],w=_({field:"",direction:"asc"});gt(async()=>await vt());const lt=E(()=>i.value.filter(l=>{const k=!m.value.priority||l.priority===m.value.priority,B=!m.value.status||l.status===m.value.status;return k&&B})),Q=E(()=>{const l=[...lt.value];return w.value.field==="priority"?l.sort((k,B)=>{const V=a.indexOf(k.priority),A=a.indexOf(B.priority);return w.value.direction==="asc"?V-A:A-V}):w.value.field==="status"&&l.sort((k,B)=>{const V=c.indexOf(k.status),A=c.indexOf(B.status);return w.value.direction==="asc"?V-A:A-V}),l}),rt=E(()=>{var l;return at(((l=b.value)==null?void 0:l.dueDate)??"")}),W=Number(n.params.id),nt=()=>{P.value=null,M.value=!0},it=l=>{P.value=l,M.value=!0},H=()=>{M.value=!1},ut=async l=>{g.value=!0;try{await r(l),await R(),G("Task created successfully.")}catch{F("Failed to create task.")}finally{g.value=!1,H()}},dt=async l=>{g.value=!0;try{await f(l),await R(),G("Task updated successfully.")}catch{F("Failed to update task.")}finally{g.value=!1,H()}},ct=async l=>{g.value=!0;try{await o(l),await R(),G("Task deleted successfully.")}catch{F("Failed to remove task.")}finally{g.value=!1}},R=async()=>{g.value=!0;try{i.value=await e(W)}catch{F("Failed to fetch tasks."),i.value=[]}finally{g.value=!1}},vt=async()=>{try{b.value=await u(W),await R()}catch{F("Failed to fetch project.")}},pt=l=>{m.value=l},ft=l=>{w.value.field===l?w.value.direction=w.value.direction==="asc"?"desc":"asc":(w.value.field=l,w.value.direction="asc")};return(l,k)=>(s(),d("section",_e,[g.value?(s(),D(ht,{key:0})):L("",!0),t("div",ge,[t("div",he,[v($,{class:"back-button","no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:k[0]||(k[0]=B=>S(p).back())},{default:x(()=>[v(jt)]),_:1}),b.value?(s(),d("h1",we,[T(" Project: "+h(b.value.title)+" ",1),t("span",be,[k[1]||(k[1]=T(" (Due: ")),t("span",{class:N(rt.value)},h(S(ot)(b.value.dueDate)),3),k[2]||(k[2]=T(" ) "))])])):L("",!0)]),v($,{class:"create-task-button",onClickButton:nt},{default:x(()=>k[3]||(k[3]=[T(" Create task ")])),_:1,__:[3]})]),t("div",Te,[v(Et,{onUpdateFilters:pt})]),Q.value.length>0?(s(),D(ye,{key:1,sort:w.value,tasks:Q.value,onEditTask:it,onRemoveTask:ct,onToggleSort:ft},null,8,["sort","tasks"])):(s(),D(Tt,{key:2,title:"No tasks yet",message:"Start by creating your first task for this project."})),M.value?(s(),D(Gt,{key:3,"task-to-edit":P.value,onClose:H,onCreate:ut,onUpdate:dt},null,8,["task-to-edit"])):L("",!0)]))}}),xe=C($e,[["__scopeId","data-v-48bfe771"]]),Ce={class:"container"},De=j({__name:"ProjectDetailsView",setup(y){return(n,p)=>(s(),d("section",Ce,[v(xe)]))}});export{De as default};

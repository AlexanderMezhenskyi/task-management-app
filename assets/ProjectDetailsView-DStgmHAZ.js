import{_ as h,c as u,o,a as t,d as I,r as _,k as X,g as p,l as C,v as z,F as P,i as F,f as M,B as w,w as x,t as g,h as j,m as Y,p as L,q as J,x as R,C as dt,y as q,b as T,e as U,n as K,z as ut,D as ct,E as vt,j as pt,G as ft}from"./index-1Rb8skfy.js";import{f as Z,E as mt}from"./helpers-A0hbnOU_.js";const kt={},_t={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function gt(m,l){return o(),u("svg",_t,l[0]||(l[0]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("path",{d:"M16 12H8"},null,-1),t("path",{d:"m12 8-4 4 4 4"},null,-1)]))}const yt=h(kt,[["render",gt]]),O=["High","Medium","Low"],H=["Pending","In Progress","Completed"],ht={class:"task-filters flex align-center"},wt={class:"form-group"},xt=["value"],$t={class:"form-group"},Tt=["value"],bt=I({__name:"TaskFilters",emits:["update-filters"],setup(m,{emit:l}){const v=l,i=_(""),e=_("");X([i,e],()=>{v("update-filters",{priority:i.value,status:e.value})});const c=()=>{i.value="",e.value=""};return(y,n)=>(o(),u("div",ht,[t("div",wt,[n[3]||(n[3]=t("label",{class:"form-label",for:"priority"},"Priority:",-1)),C(t("select",{id:"priority","onUpdate:modelValue":n[0]||(n[0]=a=>i.value=a),class:"form-select"},[n[2]||(n[2]=t("option",{value:""},"All priorities",-1)),(o(!0),u(P,null,F(M(O),a=>(o(),u("option",{key:a,value:a},g(a),9,xt))),128))],512),[[z,i.value]])]),t("div",$t,[n[5]||(n[5]=t("label",{class:"form-label",for:"status"},"Status:",-1)),C(t("select",{id:"status","onUpdate:modelValue":n[1]||(n[1]=a=>e.value=a),class:"form-select"},[n[4]||(n[4]=t("option",{value:""},"All statuses",-1)),(o(!0),u(P,null,F(M(H),a=>(o(),u("option",{key:a,value:a},g(a),9,Tt))),128))],512),[[z,e.value]])]),p(w,{variant:"ghost",size:"sm","no-padding":"",onClick:c},{default:x(()=>n[6]||(n[6]=[j(" Reset Filters ")])),_:1,__:[6]})]))}}),Ct=h(bt,[["__scopeId","data-v-b62f4ade"]]),Mt={class:"task-modal-content"},jt={class:"task-modal-header flex justify-between align-center"},It={class:"form-group"},Dt={class:"form-group"},Vt={class:"form-group"},St=["value"],Bt={class:"form-group"},Et=["value"],Pt={class:"form-group"},Ft={class:"flex justify-end align-center"},At=I({__name:"TaskModal",props:{taskToEdit:{default:null}},emits:["create","close","update"],setup(m,{emit:l}){const v=l,i=Y(),e=_(""),c=_(""),y=_("Pending"),n=_("Medium"),a=_(""),$=_(null);$.value=Number(i.params.id)||null,X(()=>m.taskToEdit,k=>{k?(e.value=k.title,c.value=k.description,y.value=k.status,n.value=k.priority,a.value=k.dueDate):(e.value="",c.value="",y.value="Pending",n.value="Medium",a.value="")},{immediate:!0});const D=L(()=>e.value.trim().length>0&&c.value.trim().length>0&&a.value.trim().length>0&&O.includes(n.value)&&H.includes(y.value)),b=()=>{if(!D.value||$.value===null)return;const k={title:e.value.trim(),description:c.value.trim(),status:y.value,priority:n.value,dueDate:a.value,projectId:$.value};m.taskToEdit&&m.taskToEdit.id?v("update",{...k,id:m.taskToEdit.id}):v("create",k)},S=()=>{v("close")};return(k,s)=>(o(),u("div",{class:"task-modal flex justify-center align-center",onClick:J(S,["self"])},[t("div",Mt,[t("div",jt,[t("h2",null,g(k.taskToEdit?"Edit task":"Create task"),1),p(w,{class:"cursor","no-padding":"",size:"sm",variant:"ghost","text-color":"var(--color-text)",onClickButton:S},{default:x(()=>[p(dt)]),_:1})]),t("form",{class:"form",onSubmit:J(b,["prevent"])},[t("div",It,[s[5]||(s[5]=t("label",{class:"form-label",for:"title"},"Title",-1)),C(t("input",{id:"title","onUpdate:modelValue":s[0]||(s[0]=r=>e.value=r),class:"form-input",required:""},null,512),[[R,e.value]])]),t("div",Dt,[s[6]||(s[6]=t("label",{class:"form-label",for:"desc"},"Description",-1)),C(t("textarea",{id:"desc","onUpdate:modelValue":s[1]||(s[1]=r=>c.value=r),class:"form-textarea",rows:"4",required:""},null,512),[[R,c.value]])]),t("div",Vt,[s[8]||(s[8]=t("label",{class:"form-label",for:"priority"},"Priority",-1)),C(t("select",{id:"priority","onUpdate:modelValue":s[2]||(s[2]=r=>n.value=r),class:"form-select"},[s[7]||(s[7]=t("option",{disabled:"",value:""},"Select priority",-1)),(o(!0),u(P,null,F(M(O),r=>(o(),u("option",{key:r,value:r},g(r),9,St))),128))],512),[[z,n.value]])]),t("div",Bt,[s[10]||(s[10]=t("label",{class:"form-label",for:"status"},"Status",-1)),C(t("select",{id:"status","onUpdate:modelValue":s[3]||(s[3]=r=>y.value=r),class:"form-select"},[s[9]||(s[9]=t("option",{disabled:"",value:""},"Select status",-1)),(o(!0),u(P,null,F(M(H),r=>(o(),u("option",{key:r,value:r},g(r),9,Et))),128))],512),[[z,y.value]])]),t("div",Pt,[s[11]||(s[11]=t("label",{class:"form-label",for:"due-date"},"Due date",-1)),C(t("input",{id:"due-date","onUpdate:modelValue":s[4]||(s[4]=r=>a.value=r),class:"form-input",type:"date"},null,512),[[R,a.value]])]),t("div",Ft,[p(w,{type:"submit",disabled:!D.value},{default:x(()=>[j(g(k.taskToEdit?"Update":"Create"),1)]),_:1},8,["disabled"])])],32)])]))}}),Ut=h(At,[["__scopeId","data-v-e2ce1e0d"]]),zt={},Nt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Rt(m,l){return o(),u("svg",Nt,l[0]||(l[0]=[q('<path d="m3 8 4-4 4 4"></path><path d="M7 4v16"></path><path d="M15 4h5l-5 6h5"></path><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"></path><path d="M20 18h-5"></path>',5)]))}const Lt=h(zt,[["render",Rt]]),Ot={},Ht={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function qt(m,l){return o(),u("svg",Ht,l[0]||(l[0]=[q('<path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path>',5)]))}const Gt=h(Ot,[["render",qt]]),Q=I({__name:"SortArrow",props:{direction:{}},setup(m){return(l,v)=>l.direction==="asc"?(o(),T(Gt,{key:0})):(o(),T(Lt,{key:1}))}}),Wt={},Jt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Kt(m,l){return o(),u("svg",Jt,l[0]||(l[0]=[t("path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"},null,-1),t("path",{d:"m15 5 4 4"},null,-1)]))}const Qt=h(Wt,[["render",Kt]]),Xt={},Yt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Zt(m,l){return o(),u("svg",Yt,l[0]||(l[0]=[q('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5)]))}const te=h(Xt,[["render",Zt]]),ee={class:"task-card flex column"},se={class:"task-row align-center"},oe={class:"task-actions flex justify-end"},ae={key:0,class:"task-description"},le=I({__name:"TaskItem",props:{task:{}},emits:["edit-task","remove-task"],setup(m,{emit:l}){const v=l;return(i,e)=>(o(),u("div",ee,[t("div",se,[t("div",null,g(i.task.title),1),t("div",null,g(i.task.priority),1),t("div",null,g(i.task.status),1),t("div",null,g(M(Z)(i.task.dueDate)),1),t("div",oe,[p(w,{size:"sm",variant:"ghost","no-padding":"","text-color":"var(--color-text)",onClickButton:e[0]||(e[0]=c=>v("edit-task"))},{default:x(()=>[p(Qt)]),_:1}),p(w,{size:"sm",variant:"ghost","no-padding":"","text-color":"var(--color-text)",onClickButton:e[1]||(e[1]=c=>v("remove-task"))},{default:x(()=>[p(te)]),_:1})])]),i.task.description?(o(),u("div",ae,[e[2]||(e[2]=t("span",{class:"task-description-title"},"Description:",-1)),j(" "+g(i.task.description),1)])):U("",!0)]))}}),ne=h(le,[["__scopeId","data-v-ce74850d"]]),re={class:"task-table flex column"},ie={class:"task-header align-center"},de={class:"task-sortable-column flex align-center"},ue={class:"task-sortable-column-title flex align-center"},ce={class:"task-sortable-column flex align-center"},ve={class:"task-sortable-column-title flex align-center"},pe=I({__name:"TaskTable",props:{tasks:{},sort:{}},emits:["edit-task","remove-task","toggle-sort"],setup(m,{emit:l}){const v=l;return(i,e)=>(o(),u("div",re,[t("div",ie,[e[4]||(e[4]=t("div",null,"Title",-1)),t("div",de,[p(w,{"no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:e[0]||(e[0]=c=>v("toggle-sort","priority"))},{default:x(()=>[t("span",ue,[e[2]||(e[2]=j(" Priority ")),t("span",{class:K(["task-sort-icon cursor",{active:i.sort.field==="priority"}])},[p(Q,{direction:i.sort.direction},null,8,["direction"])],2)])]),_:1})]),t("div",ce,[p(w,{"no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:e[1]||(e[1]=c=>v("toggle-sort","status"))},{default:x(()=>[t("span",ve,[e[3]||(e[3]=j(" Status ")),t("span",{class:K(["task-sort-icon cursor",{active:i.sort.field==="status"}])},[p(Q,{direction:i.sort.direction},null,8,["direction"])],2)])]),_:1})]),e[5]||(e[5]=t("div",null,"Due Date",-1)),e[6]||(e[6]=t("div",null,"Actions",-1))]),(o(!0),u(P,null,F(i.tasks,c=>(o(),T(ne,{key:c.id,task:c,onEditTask:y=>v("edit-task",c),onRemoveTask:y=>v("remove-task",c.id)},null,8,["task","onEditTask","onRemoveTask"]))),128))]))}}),fe=h(pe,[["__scopeId","data-v-5d1d1158"]]),me={class:"container"},ke={class:"project-header flex justify-between align-center"},_e={class:"flex align-center"},ge={class:"project-title"},ye={class:"project-dueDate"},he={class:"task-filters"},we=I({__name:"ProjectDetails",setup(m){const l=Y(),v=pt(),{fetchTasksByProjectIdAsync:i,createTaskAsync:e,updateTaskAsync:c,removeTaskAsync:y}=ut(),n=_([]),a=_(!1),$=_(!1),D=_(null),b=_({priority:"",status:""}),S=["High","Medium","Low"],k=["Completed","In Progress","Pending"],s=_({field:"",direction:"asc"}),r=_("");ct(()=>{A()});const tt=L(()=>n.value.filter(d=>{const f=!b.value.priority||d.priority===b.value.priority,V=!b.value.status||d.status===b.value.status;return f&&V})),G=L(()=>{const d=[...tt.value];return s.value.field==="priority"?d.sort((f,V)=>{const B=S.indexOf(f.priority),E=S.indexOf(V.priority);return s.value.direction==="asc"?B-E:E-B}):s.value.field==="status"&&d.sort((f,V)=>{const B=k.indexOf(f.status),E=k.indexOf(V.status);return s.value.direction==="asc"?B-E:E-B}),d}),et=Number(l.params.id),W={name:"Website Redesign",dueDate:"2025-06-10"},st=()=>{D.value=null,$.value=!0},ot=d=>{D.value=d,$.value=!0},N=()=>{$.value=!1},at=async d=>{a.value=!0;try{await e(d)}catch(f){r.value=f.message||"Failed to create task."}finally{a.value=!1}await A(),N()},lt=async d=>{a.value=!0;try{await c(d)}catch(f){r.value=f.message||"Failed to update task."}finally{a.value=!1}await A(),N()},nt=async d=>{a.value=!0;try{await y(d)}catch(f){r.value=f.message||"Failed to remove task."}finally{a.value=!1}await A()},A=async()=>{a.value=!0;try{n.value=await i(et)}catch(d){r.value=d.message||"Failed to fetch tasks."}finally{a.value=!1}},rt=d=>{b.value=d},it=d=>{s.value.field===d?s.value.direction=s.value.direction==="asc"?"desc":"asc":(s.value.field=d,s.value.direction="asc")};return(d,f)=>(o(),u("section",me,[a.value?(o(),T(ft,{key:0})):U("",!0),r.value?(o(),T(vt,{key:1,message:r.value},null,8,["message"])):U("",!0),t("div",ke,[t("div",_e,[p(w,{"no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:f[0]||(f[0]=V=>M(v).back())},{default:x(()=>[p(yt)]),_:1}),t("h1",ge,[j(" Project: "+g(W.name)+" ",1),t("span",ye,"(Due: "+g(M(Z)(W.dueDate))+")",1)])]),p(w,{onClickButton:st},{default:x(()=>f[1]||(f[1]=[j("Create task")])),_:1,__:[1]})]),t("div",he,[p(Ct,{onUpdateFilters:rt})]),G.value.length>0?(o(),T(fe,{key:2,sort:s.value,tasks:G.value,onEditTask:ot,onRemoveTask:nt,onToggleSort:it},null,8,["sort","tasks"])):(o(),T(mt,{key:3,title:"No tasks yet",message:"Start by creating your first task for this project."})),$.value?(o(),T(Ut,{key:4,"task-to-edit":D.value,onClose:N,onCreate:at,onUpdate:lt},null,8,["task-to-edit"])):U("",!0)]))}}),xe=h(we,[["__scopeId","data-v-b192a0e3"]]),$e={class:"container"},Ce=I({__name:"ProjectDetailsView",setup(m){return(l,v)=>(o(),u("section",$e,[p(xe)]))}});export{Ce as default};

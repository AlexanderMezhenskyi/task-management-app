import{_ as $,c,o as a,b as t,d as j,r as k,k as Q,h as p,p as C,H as z,F as B,y as A,g as I,B as h,w,t as _,j as M,q as X,l as O,m as W,v as N,C as dt,I as Y,f as x,e as U,n as J,G as ut,z as ct,E as vt,i as pt,D as ft}from"./index-D5vQRvLj.js";import{f as Z,E as mt,R as kt,a as gt}from"./helpers-DeP2kjxu.js";const _t={},yt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function ht(g,d){return a(),c("svg",yt,d[0]||(d[0]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("path",{d:"M16 12H8"},null,-1),t("path",{d:"m12 8-4 4 4 4"},null,-1)]))}const wt=$(_t,[["render",ht]]),L=["High","Medium","Low"],H=["Pending","In Progress","Completed"],Tt={class:"task-filters flex align-center"},xt={class:"form-group"},$t=["value"],bt={class:"form-group"},Ct=["value"],It=j({__name:"TaskFilters",emits:["update-filters"],setup(g,{emit:d}){const v=d,n=k(""),e=k("");Q([n,e],()=>{v("update-filters",{priority:n.value,status:e.value})});const u=()=>{n.value="",e.value=""};return(y,l)=>(a(),c("div",Tt,[t("div",xt,[l[3]||(l[3]=t("label",{class:"form-label",for:"priority"},"Priority:",-1)),C(t("select",{id:"priority","onUpdate:modelValue":l[0]||(l[0]=o=>n.value=o),class:"form-select"},[l[2]||(l[2]=t("option",{value:""},"All priorities",-1)),(a(!0),c(B,null,A(I(L),o=>(a(),c("option",{key:o,value:o},_(o),9,$t))),128))],512),[[z,n.value]])]),t("div",bt,[l[5]||(l[5]=t("label",{class:"form-label",for:"status"},"Status:",-1)),C(t("select",{id:"status","onUpdate:modelValue":l[1]||(l[1]=o=>e.value=o),class:"form-select"},[l[4]||(l[4]=t("option",{value:""},"All statuses",-1)),(a(!0),c(B,null,A(I(H),o=>(a(),c("option",{key:o,value:o},_(o),9,Ct))),128))],512),[[z,e.value]])]),p(h,{variant:"ghost",size:"sm","no-padding":"",onClick:u},{default:w(()=>l[6]||(l[6]=[M(" Reset filters ")])),_:1,__:[6]})]))}}),Mt=$(It,[["__scopeId","data-v-16144e19"]]),jt={class:"task-modal-content"},Dt={class:"task-modal-header flex justify-between align-center"},St={class:"form-group"},Et={class:"form-group"},Pt={class:"form-group"},Vt=["value"],Bt={class:"form-group"},At=["value"],Ft={class:"form-group"},Ut={class:"flex justify-end align-center"},zt=j({__name:"TaskModal",props:{taskToEdit:{default:null}},emits:["create","close","update"],setup(g,{emit:d}){const v=d,n=X(),e=k(""),u=k(""),y=k("Pending"),l=k("Medium"),o=k(""),T=k(null);T.value=Number(n.params.id)||null,Q(()=>g.taskToEdit,m=>{m?(e.value=m.title,u.value=m.description,y.value=m.status,l.value=m.priority,o.value=m.dueDate):(e.value="",u.value="",y.value="Pending",l.value="Medium",o.value="")},{immediate:!0});const D=O(()=>e.value.trim().length>0&&u.value.trim().length>0&&o.value.trim().length>0&&L.includes(l.value)&&H.includes(y.value)),b=()=>{if(!D.value||T.value===null)return;const m={title:e.value.trim(),description:u.value.trim(),status:y.value,priority:l.value,dueDate:o.value,projectId:T.value};g.taskToEdit&&g.taskToEdit.id?v("update",{...m,id:g.taskToEdit.id}):v("create",m)},E=()=>{v("close")};return(m,s)=>(a(),c("div",{class:"task-modal flex justify-center align-center",onClick:W(E,["self"])},[t("div",jt,[t("div",Dt,[t("h2",null,_(m.taskToEdit?"Edit task":"Create task"),1),p(h,{class:"cursor","no-padding":"",size:"sm",variant:"ghost","text-color":"var(--color-text)",onClickButton:E},{default:w(()=>[p(dt)]),_:1})]),t("form",{class:"form",onSubmit:W(b,["prevent"])},[t("div",St,[s[5]||(s[5]=t("label",{class:"form-label",for:"title"},"Title",-1)),C(t("input",{id:"title","onUpdate:modelValue":s[0]||(s[0]=r=>e.value=r),class:"form-input",required:""},null,512),[[N,e.value]])]),t("div",Et,[s[6]||(s[6]=t("label",{class:"form-label",for:"desc"},"Description",-1)),C(t("textarea",{id:"desc","onUpdate:modelValue":s[1]||(s[1]=r=>u.value=r),class:"form-textarea",rows:"4",required:""},null,512),[[N,u.value]])]),t("div",Pt,[s[8]||(s[8]=t("label",{class:"form-label",for:"priority"},"Priority",-1)),C(t("select",{id:"priority","onUpdate:modelValue":s[2]||(s[2]=r=>l.value=r),class:"form-select"},[s[7]||(s[7]=t("option",{disabled:"",value:""},"Select priority",-1)),(a(!0),c(B,null,A(I(L),r=>(a(),c("option",{key:r,value:r},_(r),9,Vt))),128))],512),[[z,l.value]])]),t("div",Bt,[s[10]||(s[10]=t("label",{class:"form-label",for:"status"},"Status",-1)),C(t("select",{id:"status","onUpdate:modelValue":s[3]||(s[3]=r=>y.value=r),class:"form-select"},[s[9]||(s[9]=t("option",{disabled:"",value:""},"Select status",-1)),(a(!0),c(B,null,A(I(H),r=>(a(),c("option",{key:r,value:r},_(r),9,At))),128))],512),[[z,y.value]])]),t("div",Ft,[s[11]||(s[11]=t("label",{class:"form-label",for:"due-date"},"Due date",-1)),C(t("input",{id:"due-date","onUpdate:modelValue":s[4]||(s[4]=r=>o.value=r),class:"form-input",type:"date"},null,512),[[N,o.value]])]),t("div",Ut,[p(h,{type:"submit",disabled:!D.value},{default:w(()=>[M(_(m.taskToEdit?"Update":"Create"),1)]),_:1},8,["disabled"])])],32)])]))}}),Rt=$(zt,[["__scopeId","data-v-e2ce1e0d"]]),Nt={},Ot={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Lt(g,d){return a(),c("svg",Ot,d[0]||(d[0]=[Y('<path d="m3 8 4-4 4 4"></path><path d="M7 4v16"></path><path d="M15 4h5l-5 6h5"></path><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"></path><path d="M20 18h-5"></path>',5)]))}const Ht=$(Nt,[["render",Lt]]),qt={},Gt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Wt(g,d){return a(),c("svg",Gt,d[0]||(d[0]=[Y('<path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path>',5)]))}const Jt=$(qt,[["render",Wt]]),K=j({__name:"SortArrow",props:{direction:{}},setup(g){return(d,v)=>d.direction==="asc"?(a(),x(Jt,{key:0})):(a(),x(Ht,{key:1}))}}),Kt={class:"task-card flex column"},Qt={class:"task-row align-center"},Xt={class:"task-actions flex justify-end"},Yt={key:0,class:"task-description"},Zt=j({__name:"TaskItem",props:{task:{}},emits:["edit-task","remove-task"],setup(g,{emit:d}){const v=d;return(n,e)=>(a(),c("div",Kt,[t("div",Qt,[t("div",null,_(n.task.title),1),t("div",null,_(n.task.priority),1),t("div",null,_(n.task.status),1),t("div",null,_(I(Z)(n.task.dueDate)),1),t("div",Xt,[p(h,{size:"sm",variant:"ghost","no-padding":"","text-color":"var(--color-text)",onClickButton:e[0]||(e[0]=u=>v("edit-task"))},{default:w(()=>[p(mt)]),_:1}),p(h,{size:"sm",variant:"ghost","no-padding":"","text-color":"var(--color-text)",onClickButton:e[1]||(e[1]=u=>v("remove-task"))},{default:w(()=>[p(kt)]),_:1})])]),n.task.description?(a(),c("div",Yt,[e[2]||(e[2]=t("span",{class:"task-description-title"},"Description:",-1)),M(" "+_(n.task.description),1)])):U("",!0)]))}}),te=$(Zt,[["__scopeId","data-v-ce74850d"]]),ee={class:"task-table flex column"},se={class:"task-header align-center"},oe={class:"task-sortable-column flex align-center"},ae={class:"task-sortable-column-title flex align-center"},le={class:"task-sortable-column flex align-center"},re={class:"task-sortable-column-title flex align-center"},ne=j({__name:"TaskTable",props:{tasks:{},sort:{}},emits:["edit-task","remove-task","toggle-sort"],setup(g,{emit:d}){const v=d;return(n,e)=>(a(),c("div",ee,[t("div",se,[e[4]||(e[4]=t("div",null,"Title",-1)),t("div",oe,[p(h,{"no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:e[0]||(e[0]=u=>v("toggle-sort","priority"))},{default:w(()=>[t("span",ae,[e[2]||(e[2]=M(" Priority ")),t("span",{class:J(["task-sort-icon cursor",{active:n.sort.field==="priority"}])},[p(K,{direction:n.sort.direction},null,8,["direction"])],2)])]),_:1})]),t("div",le,[p(h,{"no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:e[1]||(e[1]=u=>v("toggle-sort","status"))},{default:w(()=>[t("span",re,[e[3]||(e[3]=M(" Status ")),t("span",{class:J(["task-sort-icon cursor",{active:n.sort.field==="status"}])},[p(K,{direction:n.sort.direction},null,8,["direction"])],2)])]),_:1})]),e[5]||(e[5]=t("div",null,"Due date",-1)),e[6]||(e[6]=t("div",null,"Actions",-1))]),(a(!0),c(B,null,A(n.tasks,u=>(a(),x(te,{key:u.id,task:u,onEditTask:y=>v("edit-task",u),onRemoveTask:y=>v("remove-task",u.id)},null,8,["task","onEditTask","onRemoveTask"]))),128))]))}}),ie=$(ne,[["__scopeId","data-v-fd12e74c"]]),de={class:"container"},ue={class:"project-header flex justify-between align-center"},ce={class:"flex align-center"},ve={class:"project-title"},pe={class:"project-dueDate"},fe={class:"task-filters"},me=j({__name:"ProjectDetails",setup(g){const d=X(),v=pt(),{fetchTasksByProjectIdAsync:n,createTaskAsync:e,updateTaskAsync:u,removeTaskAsync:y}=ut(),l=k([]),o=k(!1),T=k(!1),D=k(null),b=k({priority:"",status:""}),E=["High","Medium","Low"],m=["Completed","In Progress","Pending"],s=k({field:"",direction:"asc"}),r=k("");ct(()=>{F()});const tt=O(()=>l.value.filter(i=>{const f=!b.value.priority||i.priority===b.value.priority,S=!b.value.status||i.status===b.value.status;return f&&S})),q=O(()=>{const i=[...tt.value];return s.value.field==="priority"?i.sort((f,S)=>{const P=E.indexOf(f.priority),V=E.indexOf(S.priority);return s.value.direction==="asc"?P-V:V-P}):s.value.field==="status"&&i.sort((f,S)=>{const P=m.indexOf(f.status),V=m.indexOf(S.status);return s.value.direction==="asc"?P-V:V-P}),i}),et=Number(d.params.id),G={title:"Website Redesign",dueDate:"2025-06-10"},st=()=>{D.value=null,T.value=!0},ot=i=>{D.value=i,T.value=!0},R=()=>{T.value=!1},at=async i=>{o.value=!0;try{await e(i),await F()}catch(f){r.value=f.message||"Failed to create task."}finally{o.value=!1,R()}},lt=async i=>{o.value=!0;try{await u(i),await F()}catch(f){r.value=f.message||"Failed to update task."}finally{o.value=!1,R()}},rt=async i=>{o.value=!0;try{await y(i),await F()}catch(f){r.value=f.message||"Failed to remove task."}finally{o.value=!1}},F=async()=>{o.value=!0;try{l.value=await n(et)}catch(i){r.value=i.message||"Failed to fetch tasks."}finally{o.value=!1}},nt=i=>{b.value=i},it=i=>{s.value.field===i?s.value.direction=s.value.direction==="asc"?"desc":"asc":(s.value.field=i,s.value.direction="asc")};return(i,f)=>(a(),c("section",de,[o.value?(a(),x(ft,{key:0})):U("",!0),r.value?(a(),x(vt,{key:1,message:r.value},null,8,["message"])):U("",!0),t("div",ue,[t("div",ce,[p(h,{"no-padding":"",variant:"ghost",size:"sm","text-color":"var(--color-text)",onClick:f[0]||(f[0]=S=>I(v).back())},{default:w(()=>[p(wt)]),_:1}),t("h1",ve,[M(" Project: "+_(G.title)+" ",1),t("span",pe,"(Due: "+_(I(Z)(G.dueDate))+")",1)])]),p(h,{onClickButton:st},{default:w(()=>f[1]||(f[1]=[M("Create task")])),_:1,__:[1]})]),t("div",fe,[p(Mt,{onUpdateFilters:nt})]),q.value.length>0?(a(),x(ie,{key:2,sort:s.value,tasks:q.value,onEditTask:ot,onRemoveTask:rt,onToggleSort:it},null,8,["sort","tasks"])):(a(),x(gt,{key:3,title:"No tasks yet",message:"Start by creating your first task for this project."})),T.value?(a(),x(Rt,{key:4,"task-to-edit":D.value,onClose:R,onCreate:at,onUpdate:lt},null,8,["task-to-edit"])):U("",!0)]))}}),ke=$(me,[["__scopeId","data-v-3aee1327"]]),ge={class:"container"},he=j({__name:"ProjectDetailsView",setup(g){return(d,v)=>(a(),c("section",ge,[p(ke)]))}});export{he as default};
